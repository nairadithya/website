---
const data = await fetch(
    `http://ws.audioscrobbler.com/2.0/?method=user.gettoptracks&user=${import.meta.env.LAST_FM_USERNAME}&period=7day&limit=1&api_key=${import.meta.env.LAST_FM_API_KEY}&format=json`
)

const topTrack = await data.json()
---

<a href={topTrack.toptracks.track[0].url}>
    <div class="flex place-items-center space-x-2 py-4">
        <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="currentColor"
            ><path
                d="M400-120q-66 0-113-47t-47-113q0-66 47-113t113-47q23 0 42.5 5.5T480-418v-422h240v160H560v400q0 66-47 113t-113 47Z"
            ></path></svg
        >
        <div class="flex flex-col">
            <div class="font-bold">
                {topTrack.toptracks.track[0].name}
            </div>
            <div class="p-0">
                {topTrack.toptracks.track[0].artist.name}
            </div>
        </div>
    </div>
</a>
