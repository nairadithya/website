---
const LAST_FM_USERNAME = import.meta.env.LAST_FM_USERNAME
const LAST_FM_API_KEY = import.meta.env.LAST_FM_API_KEY
---

<div
    id="top-track"
    class="my-2 flex w-full items-center justify-items-start space-x-2 p-4"
>
    <div class="flex h-10 items-start">
        <svg
            class="h-full w-auto"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 -960 960 960"
            fill="currentColor"
        >
            <path
                d="M400-120q-66 0-113-47t-47-113q0-66 47-113t113-47q23 0 42.5 5.5T480-418v-422h240v160H560v400q0 66-47 113t-113 47Z"
            >
            </path>
        </svg>
    </div>
    <div class="flex h-10 flex-col justify-between leading-tight">
        <div id="track-name" class="font-bold"></div>
        <div id="track-artist" class="p-0"></div>
    </div>
</div>

<script>
    // async function fetchTopTrack() {
    //     try {
    //         const response = await fetch(
    //             `http://ws.audioscrobbler.com/2.0/?method=user.gettoptracks&user=${import.meta.env.LAST_FM_USERNAME}&period=7day&limit=1&api_key=${import.meta.env.LAST_FM_API_KEY}&format=json`
    //         )
    //         const data = await response.json()
    //         const track = data.toptracks.track[0]
    //
    //         document.getElementById('track-name').textContent = track.name
    //         document.getElementById('track-artist').textContent =
    //             track.artist.name
    //
    //         const topTrackDiv = document.getElementById('top-track')
    //         topTrackDiv.querySelector('a').href = track.url
    //     } catch (error) {
    //         console.error('Error fetching top track:', error)
    //     }
    // }
    //
    // fetchTopTrack()
</script>
