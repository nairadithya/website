---
import Footer from '@/components/Footer.astro'
import QuickLinks from '@/components/QuickLinks.astro'
import Music from '@/components/Music.astro'
import HomeLayout from '@/layouts/HomeLayout.astro'
import FormattedDate from '@/components/FormattedDate.astro'
import ThemeSwitcher from '@/components/MobileThemeSwitcher.astro'
import { getCollection } from 'astro:content'

const essayEntries = (await getCollection('essays')).sort(
    (a, b) => b.data.date.getTime() - a.data.date.getTime()
)

const posts = essayEntries.slice(0, 3)
---

<HomeLayout title="Adithya Nair.">
    <div class="pb-7 md:pb-0">
        <div class="flex items-center justify-between">
            <div class="py-4 font-serif text-4xl font-light">
                Hello, I'm <p
                    class="block font-extrabold text-blue-400 md:inline"
                >
                    Adithya.
                </p>
            </div>
        </div>
    </div>
    <p>
        I am a student, writer and programmer. This is my place on the Internet.
        Read more about me <a
            class="text-blue-600 underline dark:text-green-200"
            href="/about">here</a
        >.
    </p>
    <div class="w-fit py-2">
        <div>My current top song is:</div>
        <div>
            <Music />
        </div>
    </div>
    <h2 class="py-2 font-serif text-2xl font-extrabold">Links</h2>
    <QuickLinks />
    <div class="grid grid-cols-3 place-items-center py-2"></div>
    <h2 class="py-2 text-2xl font-extrabold">Recent Essays</h2>
    {
        posts.map((post) => (
            <div class="py-4">
                <div class="flex flex-col justify-between pb-1 md:flex-row md:pb-1">
                    <div class="text-xl font-medium">
                        <a href={`/essays/${post.slug}`}>{post.data.title}</a>
                    </div>
                    <div class="md:text-right">
                        <FormattedDate date={post.data.date} />
                    </div>
                </div>
                <div class="font-light">{post.data.description}</div>
            </div>
        ))
    }
    <Footer />
</HomeLayout>
